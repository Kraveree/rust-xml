<html>
<head>
<title>C:\wrk\projects\rust-xml\src\tokenizer.rs</title>
<style>
body { background-color: #ffffff; font-family: "Courier New"; font-size:10.0pt; font-style: normal; font-weight: normal; text-decoration: none; }
.se2 { color: #000000; background-color: #ffffff; } /* Window Text */
.se17 { color: #800080; background-color: #ffffff; } /* Keyword */
.se19 { color: #000080; background-color: #ffffff; } /* Number */
.se20 { color: #008080; background-color: #ffffff; } /* String */
.se23 { color: #800000; background-color: #ffffff; } /* Punctuation */
.se25 { color: #000000; background-color: #ffffff; } /* Operator */
.se28 { color: #000000; background-color: #ffffff; font-weight: bolder; } /* Function */
.se49 { color: #008000; background-color: #ffffff; font-style: italic; } /* Comment */
.se55 { color: #000000; background-color: #ffffff; } /* Window Text */
.se56 { color: #303080; background-color: #ffffff; } /* Number */
.se58 { color: #006060; background-color: #ffffff; } /* String */
</style>
</head>
<body>
<pre>
<span class="se49">//use std::fmt;</span>
<span class="se49">//use std::ptr;</span>
<span class="se49">//use std::str::Chars;</span>
<span class="se49">//use std::error::Error;</span>
<span class="se49">//use errors::ExtractResult;</span>
<span class="se49">//use errors::ExtractError;</span>
<span class="se55">use</span><span class="se2"> </span><span class="se55">token</span><span class="se25">::</span><span class="se55">WhitespaceKind</span><span class="se25">;</span>
<span class="se55">use</span><span class="se2"> </span><span class="se55">token</span><span class="se25">::</span><span class="se55">SymbolKind</span><span class="se25">;</span>
<span class="se55">use</span><span class="se2"> </span><span class="se55">token</span><span class="se25">::</span><span class="se55">XmlToken</span><span class="se25">;</span>


<span class="se55">pub</span><span class="se2"> </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">new_whitespace_kind</span><span class="se2">(</span><span class="se55">value</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">, </span><span class="se55">count</span><span class="se25">:</span><span class="se2"> </span><span class="se55">usize</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">WhitespaceKind</span><span class="se25">&gt;</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">match</span><span class="se2"> </span><span class="se55">value</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se58">'\u{0020}'</span><span class="se2"> </span><span class="se25">=&gt;</span><span class="se2"> </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se55">count</span><span class="se2">)),</span>
<span class="se2">                </span><span class="se58">'\u{0009}'</span><span class="se2"> </span><span class="se25">=&gt;</span><span class="se2"> </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Tab</span><span class="se2">(</span><span class="se55">count</span><span class="se2">)),</span>
<span class="se2">                </span><span class="se58">'\u{000A}'</span><span class="se2"> </span><span class="se25">=&gt;</span><span class="se2"> </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">LF</span><span class="se2">(</span><span class="se55">count</span><span class="se2">)),</span>
<span class="se2">                </span><span class="se58">'\u{000D}'</span><span class="se2"> </span><span class="se25">=&gt;</span><span class="se2"> </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">CR</span><span class="se2">(</span><span class="se55">count</span><span class="se2">)),</span>
<span class="se2">                </span><span class="se58">'\u{000C}'</span><span class="se2"> </span><span class="se25">=&gt;</span><span class="se2"> </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">FF</span><span class="se2">(</span><span class="se55">count</span><span class="se2">)),</span>
<span class="se2">                </span><span class="se55">_</span><span class="se2"> </span><span class="se25">=&gt;</span><span class="se2"> </span><span class="se55">None</span>
<span class="se2">        </span><span class="se23">}</span>
<span class="se23">}</span>


<span class="se55">trait</span><span class="se2"> </span><span class="se55">Extractor</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">peek_first</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se17">char</span><span class="se25">&gt;;</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">count_same</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">, </span><span class="se55">value</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">usize</span><span class="se25">;</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">take_until</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">mut</span><span class="se2"> </span><span class="se55">self</span><span class="se2">, </span><span class="se55">contains</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se55">String</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">String</span><span class="se25">;</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">reverse</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">mut</span><span class="se2"> </span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se55">String</span><span class="se25">;</span>
<span class="se23">}</span>


<span class="se55">impl</span><span class="se2"> </span><span class="se55">Extractor</span><span class="se2"> </span><span class="se17">for</span><span class="se2"> </span><span class="se55">String</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">peek_first</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se17">char</span><span class="se25">&gt;</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">self</span><span class="se2">.</span><span class="se28">chars</span><span class="se2">().</span><span class="se28">peekable</span><span class="se2">().</span><span class="se28">peek</span><span class="se2">().</span><span class="se28">cloned</span><span class="se2">()</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">count_same</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">, </span><span class="se55">value</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">usize</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">count</span><span class="se25">:</span><span class="se2"> </span><span class="se55">usize</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se19">0</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">peekable</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se55">self</span><span class="se2">.</span><span class="se28">chars</span><span class="se2">().</span><span class="se28">peekable</span><span class="se2">()</span><span class="se25">;</span>

<span class="se2">                </span><span class="se17">while</span><span class="se2"> </span><span class="se55">peekable</span><span class="se2">.</span><span class="se28">peek</span><span class="se2">() </span><span class="se25">==</span><span class="se2"> </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">value</span><span class="se2">) </span><span class="se23">{</span>
<span class="se2">                        </span><span class="se55">count</span><span class="se2"> </span><span class="se25">+=</span><span class="se2"> </span><span class="se19">1</span><span class="se25">;</span>
<span class="se2">                        </span><span class="se55">peekable</span><span class="se2">.</span><span class="se28">next</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se23">}</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">count</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">take_until</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">mut</span><span class="se2"> </span><span class="se55">self</span><span class="se2">, </span><span class="se55">contains</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se55">String</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">String</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">result</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se23">{</span>
<span class="se2">                        </span><span class="se55">let</span><span class="se2"> </span><span class="se55">iter</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se55">self</span><span class="se2">.</span><span class="se28">chars</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                        </span><span class="se17">for</span><span class="se2"> </span><span class="se55">c</span><span class="se2"> </span><span class="se55">in</span><span class="se2"> </span><span class="se55">iter</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                                </span><span class="se17">if</span><span class="se2"> </span><span class="se55">contains</span><span class="se2">.</span><span class="se28">contains</span><span class="se2">(</span><span class="se55">c</span><span class="se2">) </span><span class="se23">{</span>
<span class="se2">                                        </span><span class="se55">result</span><span class="se2">.</span><span class="se28">push</span><span class="se2">(</span><span class="se55">c</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                                </span><span class="se23">}</span>
<span class="se2">                        </span><span class="se23">}</span>
<span class="se2">                </span><span class="se23">}</span>
<span class="se2">                </span><span class="se55">self</span><span class="se2">.</span><span class="se28">drain</span><span class="se2">(..</span><span class="se55">result</span><span class="se2">.</span><span class="se28">len</span><span class="se2">())</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">result</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">reverse</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">mut</span><span class="se2"> </span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se55">String</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">rev</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se55">String</span><span class="se25">::</span><span class="se28">from</span><span class="se2">(</span><span class="se55">self</span><span class="se2">.</span><span class="se28">chars</span><span class="se2">().</span><span class="se28">rev</span><span class="se2">().</span><span class="se55">collect</span><span class="se25">::&lt;</span><span class="se55">String</span><span class="se25">&gt;</span><span class="se2">())</span><span class="se25">;</span>
<span class="se2">                </span><span class="se25">*</span><span class="se55">self</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se55">rev</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">self</span>
<span class="se2">        </span><span class="se23">}</span>
<span class="se23">}</span>


<span class="se55">trait</span><span class="se2"> </span><span class="se55">WhitespaceExtract</span><span class="se2"> </span><span class="se25">:</span><span class="se2"> </span><span class="se55">Extractor</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">peek_whitespace</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se17">char</span><span class="se25">&gt;;</span><span class="se2"> </span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_white_space</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">WhitespaceKind</span><span class="se25">&gt;;</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_white_space</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">mut</span><span class="se2"> </span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">WhitespaceKind</span><span class="se25">&gt;;</span>
<span class="se23">}</span>


<span class="se55">impl</span><span class="se2"> </span><span class="se55">WhitespaceExtract</span><span class="se2"> </span><span class="se17">for</span><span class="se2"> </span><span class="se55">String</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">peek_whitespace</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se17">char</span><span class="se25">&gt;</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">self</span><span class="se2">.</span><span class="se28">peek_first</span><span class="se2">()</span>
<span class="se2">                        .</span><span class="se28">and_then</span><span class="se2">(</span><span class="se25">|</span><span class="se55">c</span><span class="se25">|</span><span class="se2"> </span><span class="se17">if</span><span class="se2"> </span><span class="se55">c</span><span class="se2">.</span><span class="se28">is_whitespace</span><span class="se2">() </span><span class="se23">{</span><span class="se2"> </span>
<span class="se2">                                                </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">c</span><span class="se2">) </span>
<span class="se2">                                      </span><span class="se23">}</span>
<span class="se2">                                      </span><span class="se17">else</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                                                </span><span class="se55">None</span>
<span class="se2">                                      </span><span class="se23">}</span><span class="se2">)</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_white_space</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">WhitespaceKind</span><span class="se25">&gt;</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">self</span><span class="se2">.</span><span class="se28">peek_whitespace</span><span class="se2">().</span><span class="se28">and_then</span><span class="se2">(</span><span class="se25">|</span><span class="se55">c</span><span class="se25">|</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                        </span><span class="se55">let</span><span class="se2"> </span><span class="se55">count</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se55">self</span><span class="se2">.</span><span class="se28">count_same</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">c</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                        </span><span class="se28">new_whitespace_kind</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">c</span><span class="se2">, </span><span class="se55">count</span><span class="se2">)</span>
<span class="se2">                </span><span class="se23">}</span><span class="se2">)</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_white_space</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">mut</span><span class="se2"> </span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">WhitespaceKind</span><span class="se25">&gt;</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">self</span><span class="se2">.</span><span class="se28">peek_whitespace</span><span class="se2">().</span><span class="se28">and_then</span><span class="se2">(</span><span class="se25">|</span><span class="se55">c</span><span class="se25">|</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                        </span><span class="se55">let</span><span class="se2"> </span><span class="se55">count</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se55">self</span><span class="se2">.</span><span class="se28">count_same</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">c</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                        </span><span class="se55">self</span><span class="se2">.</span><span class="se28">drain</span><span class="se2">(..</span><span class="se55">count</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                        </span><span class="se28">new_whitespace_kind</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">c</span><span class="se2">, </span><span class="se55">count</span><span class="se2">)</span>
<span class="se2">                </span><span class="se23">}</span><span class="se2">)</span>
<span class="se2">        </span><span class="se23">}</span>
<span class="se23">}</span>


<span class="se55">trait</span><span class="se2"> </span><span class="se55">SymbolExtract</span><span class="se2"> </span><span class="se25">:</span><span class="se2"> </span><span class="se55">Extractor</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">peek_symbol</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se17">char</span><span class="se25">&gt;;</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">is_symbol</span><span class="se2">(</span><span class="se55">value</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se17">bool</span><span class="se25">;</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_symbol</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">SymbolKind</span><span class="se25">&gt;;</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_symbol</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">mut</span><span class="se2"> </span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">SymbolKind</span><span class="se25">&gt;;</span>
<span class="se23">}</span>

<span class="se17">static</span><span class="se2"> </span><span class="se55">SYMBOLS</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se58">'static str = &quot;!?@#$%^&amp;*()-+=|\\/&lt;&gt;,.~[]{}&quot;;</span>

<span class="se55">impl</span><span class="se2"> </span><span class="se55">SymbolExtract</span><span class="se2"> </span><span class="se17">for</span><span class="se2"> </span><span class="se55">String</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">is_symbol</span><span class="se2">(</span><span class="se55">value</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se17">bool</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">SYMBOLS</span><span class="se2">.</span><span class="se28">contains</span><span class="se2">(</span><span class="se25">*</span><span class="se55">value</span><span class="se2">)</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">peek_symbol</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se17">char</span><span class="se25">&gt;</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">self</span><span class="se2">.</span><span class="se28">peek_first</span><span class="se2">()</span>
<span class="se2">                        .</span><span class="se28">and_then</span><span class="se2">(</span><span class="se25">|</span><span class="se55">c</span><span class="se25">|</span><span class="se2"> </span><span class="se17">if</span><span class="se2"> </span><span class="se55">Self</span><span class="se25">::</span><span class="se28">is_symbol</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">c</span><span class="se2">) </span><span class="se23">{</span><span class="se2"> </span>
<span class="se2">                                                </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">c</span><span class="se2">) </span>
<span class="se2">                                      </span><span class="se23">}</span>
<span class="se2">                                      </span><span class="se17">else</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                                                </span><span class="se55">None</span>
<span class="se2">                                      </span><span class="se23">}</span><span class="se2">)</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_symbol</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">SymbolKind</span><span class="se25">&gt;</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">self</span><span class="se2">.</span><span class="se28">peek_first</span><span class="se2">().</span><span class="se28">and_then</span><span class="se2">(</span><span class="se25">|</span><span class="se55">c</span><span class="se25">|</span><span class="se2"> </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">SymbolKind</span><span class="se25">::</span><span class="se28">Symbol</span><span class="se2">(</span><span class="se55">c</span><span class="se2">)))</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_symbol</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">mut</span><span class="se2"> </span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">SymbolKind</span><span class="se25">&gt;</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">result</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se55">self</span><span class="se2">.</span><span class="se28">check_symbol</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se17">if</span><span class="se2"> </span><span class="se55">result</span><span class="se2">.</span><span class="se28">is_some</span><span class="se2">() </span><span class="se23">{</span><span class="se2"> </span><span class="se55">self</span><span class="se2">.</span><span class="se28">drain</span><span class="se2">(.</span><span class="se56">.1</span><span class="se2">)</span><span class="se25">;</span><span class="se2"> </span><span class="se23">}</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">result</span>
<span class="se2">        </span><span class="se23">}</span>
<span class="se23">}</span>


<span class="se55">trait</span><span class="se2"> </span><span class="se55">IdentExtract</span><span class="se25">:</span><span class="se2"> </span><span class="se55">Extractor</span><span class="se2"> </span><span class="se25">+</span><span class="se2"> </span><span class="se55">SymbolExtract</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_ident</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">, </span><span class="se55">start</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">, </span><span class="se55">end</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">String</span><span class="se25">&gt;;</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_ident</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">, </span><span class="se55">start</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">, </span><span class="se55">end</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">String</span><span class="se25">&gt;;</span>
<span class="se23">}</span>


<span class="se55">impl</span><span class="se2"> </span><span class="se55">IdentExtract</span><span class="se2"> </span><span class="se17">for</span><span class="se2"> </span><span class="se55">String</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_ident</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">, </span><span class="se55">start</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">, </span><span class="se55">end</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">String</span><span class="se25">&gt;</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">None</span>
<span class="se2">        </span><span class="se23">}</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_ident</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">, </span><span class="se55">start</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">, </span><span class="se55">end</span><span class="se25">:</span><span class="se2"> </span><span class="se25">&amp;</span><span class="se17">char</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">String</span><span class="se25">&gt;</span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">None</span>
<span class="se2">        </span><span class="se23">}</span>
<span class="se23">}</span>


<span class="se55">trait</span><span class="se2"> </span><span class="se55">ElementExtract</span><span class="se25">:</span><span class="se2"> </span><span class="se55">Extractor</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_element_token</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">XmlToken</span><span class="se25">&gt;;</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_element_token</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">XmlToken</span><span class="se25">&gt;;</span>
<span class="se23">}</span>


<span class="se55">impl</span><span class="se2"> </span><span class="se55">ElementExtract</span><span class="se2"> </span><span class="se17">for</span><span class="se2"> </span><span class="se55">String</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_element_token</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">XmlToken</span><span class="se25">&gt;</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">None</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_element_token</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">XmlToken</span><span class="se25">&gt;</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">None</span>
<span class="se2">        </span><span class="se23">}</span>
<span class="se23">}</span>


<span class="se55">trait</span><span class="se2"> </span><span class="se55">XmlTokenExtract</span><span class="se25">:</span><span class="se2"> </span><span class="se55">WhitespaceExtract</span><span class="se2"> </span><span class="se25">+</span><span class="se2"> </span><span class="se55">ElementExtract</span><span class="se2"> </span><span class="se25">+</span><span class="se2"> </span><span class="se55">SymbolExtract</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_xml_token</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">XmlToken</span><span class="se25">&gt;;</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_xml_token</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">mut</span><span class="se2"> </span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">XmlToken</span><span class="se25">&gt;;</span>
<span class="se23">}</span>


<span class="se55">impl</span><span class="se2"> </span><span class="se55">XmlTokenExtract</span><span class="se2"> </span><span class="se17">for</span><span class="se2"> </span><span class="se55">String</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_xml_token</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">XmlToken</span><span class="se25">&gt;</span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">whitespace</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se55">self</span><span class="se2">.</span><span class="se28">check_white_space</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se17">if</span><span class="se2"> </span><span class="se55">whitespace</span><span class="se2">.</span><span class="se28">is_some</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                        </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">whitespace</span><span class="se2">.</span><span class="se28">unwrap</span><span class="se2">()))</span>
<span class="se2">                </span><span class="se23">}</span>
<span class="se2">                </span><span class="se17">else</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                        </span><span class="se55">let</span><span class="se2"> </span><span class="se55">element</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se55">self</span><span class="se2">.</span><span class="se28">check_element_token</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                        </span><span class="se17">if</span><span class="se2"> </span><span class="se55">element</span><span class="se2">.</span><span class="se28">is_some</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                                </span><span class="se55">element</span>
<span class="se2">                        </span><span class="se23">}</span>
<span class="se2">                        </span><span class="se17">else</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                                </span><span class="se55">None</span>
<span class="se2">                        </span><span class="se23">}</span>
<span class="se2">                </span><span class="se23">}</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_xml_token</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">mut</span><span class="se2"> </span><span class="se55">self</span><span class="se2">) </span><span class="se25">-&gt;</span><span class="se2"> </span><span class="se55">Option</span><span class="se25">&lt;</span><span class="se55">XmlToken</span><span class="se25">&gt;</span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">whitespace</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se55">self</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se17">if</span><span class="se2"> </span><span class="se55">whitespace</span><span class="se2">.</span><span class="se28">is_some</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                        </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">whitespace</span><span class="se2">.</span><span class="se28">unwrap</span><span class="se2">()))</span>
<span class="se2">                </span><span class="se23">}</span>
<span class="se2">                </span><span class="se17">else</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                        </span><span class="se55">let</span><span class="se2"> </span><span class="se55">element</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se55">self</span><span class="se2">.</span><span class="se28">check_element_token</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                        </span><span class="se17">if</span><span class="se2"> </span><span class="se55">element</span><span class="se2">.</span><span class="se28">is_some</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                                </span><span class="se55">element</span>
<span class="se2">                        </span><span class="se23">}</span>
<span class="se2">                        </span><span class="se17">else</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">                                </span><span class="se55">None</span>
<span class="se2">                        </span><span class="se23">}</span>
<span class="se2">                </span><span class="se23">}</span>
<span class="se2">        </span><span class="se23">}</span>
<span class="se23">}</span><span class="se2"> </span>


<span class="se2">#[</span><span class="se28">cfg</span><span class="se2">(</span><span class="se55">test</span><span class="se2">)]</span>
<span class="se55">mod</span><span class="se2"> </span><span class="se55">tests</span><span class="se2"> </span><span class="se23">{</span>
<span class="se2">        </span><span class="se55">use</span><span class="se2"> </span><span class="se55">token</span><span class="se25">::</span><span class="se55">WhitespaceKind</span><span class="se25">;</span><span class="se2"> </span>
<span class="se2">        </span><span class="se55">use</span><span class="se2"> </span><span class="se55">token</span><span class="se25">::</span><span class="se55">SymbolKind</span><span class="se25">;</span><span class="se2"> </span>
<span class="se2">        </span><span class="se55">use</span><span class="se2"> </span><span class="se55">token</span><span class="se25">::</span><span class="se55">XmlToken</span><span class="se25">;</span><span class="se2"> </span>
<span class="se2">        </span><span class="se55">use</span><span class="se2"> </span><span class="se55">super</span><span class="se25">::</span><span class="se55">WhitespaceExtract</span><span class="se25">;</span>
<span class="se2">        </span><span class="se55">use</span><span class="se2"> </span><span class="se55">super</span><span class="se25">::</span><span class="se55">XmlTokenExtract</span><span class="se25">;</span>
<span class="se2">        </span><span class="se55">use</span><span class="se2"> </span><span class="se55">super</span><span class="se25">::</span><span class="se55">SymbolExtract</span><span class="se25">;</span>
<span class="se2">        </span><span class="se55">use</span><span class="se2"> </span><span class="se55">super</span><span class="se25">::</span><span class="se55">IdentExtract</span><span class="se25">;</span>
<span class="se2">        </span><span class="se55">use</span><span class="se2"> </span><span class="se55">super</span><span class="se25">::</span><span class="se55">Extractor</span><span class="se25">;</span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extractor_peek_first</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">s</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">s</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">.</span><span class="se28">peek_first</span><span class="se2">(), </span><span class="se55">None</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">s</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;aBc&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">.</span><span class="se28">peek_first</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se58">'a'</span><span class="se2">))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">, </span><span class="se20">&quot;aBc&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extractor_count_same</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">s</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">s</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">.</span><span class="se28">count_same</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se58">'a'</span><span class="se2">), </span><span class="se19">0</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">s</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;aaa&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">.</span><span class="se28">count_same</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se58">'a'</span><span class="se2">), </span><span class="se19">3</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">, </span><span class="se20">&quot;aaa&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">s</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;aaaabbccdd&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">.</span><span class="se28">count_same</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se58">'a'</span><span class="se2">), </span><span class="se19">4</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">, </span><span class="se20">&quot;aaaabbccdd&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extractor_take_until</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">s</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">contains</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">s</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">contains</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">.</span><span class="se28">take_until</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">contains</span><span class="se2">), </span><span class="se20">&quot;&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">contains</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">s</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;abcd!!&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">contains</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">.</span><span class="se28">take_until</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se55">contains</span><span class="se2">), </span><span class="se20">&quot;abcd&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">, </span><span class="se20">&quot;!!&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">contains</span><span class="se2">, </span><span class="se20">&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extractor_reverse</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">s</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">s</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">.</span><span class="se28">reverse</span><span class="se2">(), </span><span class="se20">&quot;&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">s</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;abcdefg&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">.</span><span class="se28">reverse</span><span class="se2">(), </span><span class="se20">&quot;gfedcba&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">, </span><span class="se20">&quot;gfedcba&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">s</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;?????????????????????????&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">.</span><span class="se28">reverse</span><span class="se2">(), </span><span class="se20">&quot;?????????????????????????&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">s</span><span class="se2">, </span><span class="se20">&quot;gfedcba&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">space_token</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">whitespace</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se19">10</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">whitespace</span><span class="se2">, </span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se19">10</span><span class="se2">))</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_ws_token</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">ws</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">(), </span><span class="se55">None</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;   &quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se19">3</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{0020}\u{0020}\u{0020}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se19">3</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{0009}\u{0009}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Tab</span><span class="se2">(</span><span class="se19">4</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{000A}\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">LF</span><span class="se2">(</span><span class="se19">2</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{000D}\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">CR</span><span class="se2">(</span><span class="se19">1</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{000C}\u{000C}\u{0000}\u{0000}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">FF</span><span class="se2">(</span><span class="se19">2</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{0000}\u{0000}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span><span class="se2"> </span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_xml_token</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">ws</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_xml_token</span><span class="se2">(), </span><span class="se55">None</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;   &quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se19">3</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{0020}\u{0020}\u{0020}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se19">3</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{0009}\u{0009}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Tab</span><span class="se2">(</span><span class="se19">4</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{000A}\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">LF</span><span class="se2">(</span><span class="se19">2</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{0009}\u{0009}&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{000D}\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">CR</span><span class="se2">(</span><span class="se19">1</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{000C}\u{000C}\u{0000}\u{0000}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">FF</span><span class="se2">(</span><span class="se19">2</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{0000}\u{0000}&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span><span class="se2"> </span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_symbol_token</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">symbol</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">symbol</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">symbol</span><span class="se2">.</span><span class="se28">peek_symbol</span><span class="se2">(), </span><span class="se55">None</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">symbol</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;!&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">symbol</span><span class="se2">.</span><span class="se28">peek_symbol</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se58">'!'</span><span class="se2">))</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">symbol</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;?&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">symbol</span><span class="se2">.</span><span class="se28">check_symbol</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">SymbolKind</span><span class="se25">::</span><span class="se28">Symbol</span><span class="se2">(</span><span class="se58">'?'</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">symbol</span><span class="se2">, </span><span class="se20">&quot;?&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_ws_token</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">ws</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">check_white_space</span><span class="se2">(), </span><span class="se55">None</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;   &quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">check_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se19">3</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;   &quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{0020}\u{0020}\u{0020}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">check_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se19">3</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{0020}\u{0020}\u{0020}&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{0009}\u{0009}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">check_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Tab</span><span class="se2">(</span><span class="se19">4</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{0009}\u{0009}\u{0009}\u{0009}&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{000A}\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">check_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">LF</span><span class="se2">(</span><span class="se19">2</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{000A}\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{000D}\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">check_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">CR</span><span class="se2">(</span><span class="se19">1</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{000D}\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">ws</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{000C}\u{000C}\u{0000}\u{0000}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">check_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">FF</span><span class="se2">(</span><span class="se19">2</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{000C}\u{000C}\u{0000}\u{0000}&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span><span class="se2"> </span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">check_xml_token</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">xmltoken</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">xmltoken</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">.</span><span class="se28">check_xml_token</span><span class="se2">(), </span><span class="se55">None</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">xmltoken</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;   &quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">.</span><span class="se28">check_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se19">3</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">, </span><span class="se20">&quot;   &quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">xmltoken</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{0020}\u{0020}\u{0020}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">.</span><span class="se28">check_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se19">3</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">, </span><span class="se20">&quot;\u{0020}\u{0020}\u{0020}&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">xmltoken</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{0009}\u{0009}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">.</span><span class="se28">check_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Tab</span><span class="se2">(</span><span class="se19">4</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">, </span><span class="se20">&quot;\u{0009}\u{0009}\u{0009}\u{0009}&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">xmltoken</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{000A}\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">.</span><span class="se28">check_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">LF</span><span class="se2">(</span><span class="se19">2</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">, </span><span class="se20">&quot;\u{000A}\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">xmltoken</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{000D}\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">.</span><span class="se28">check_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">CR</span><span class="se2">(</span><span class="se19">1</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">, </span><span class="se20">&quot;\u{000D}\u{000A}\u{0009}\u{0009}&quot;</span><span class="se2">)</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">xmltoken</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{000C}\u{000C}\u{0000}\u{0000}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">.</span><span class="se28">check_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">FF</span><span class="se2">(</span><span class="se19">2</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">, </span><span class="se20">&quot;\u{000C}\u{000C}\u{0000}\u{0000}&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span><span class="se2"> </span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_ws_token_in_sequence</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">ws</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{0020}\u{0009}\u{000A}\u{000D}\u{000C}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se19">1</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{0009}\u{000A}\u{000D}\u{000C}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">())</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Tab</span><span class="se2">(</span><span class="se19">1</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{000A}\u{000D}\u{000C}&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">LF</span><span class="se2">(</span><span class="se19">1</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{000D}\u{000C}&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">CR</span><span class="se2">(</span><span class="se19">1</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;\u{000C}&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">.</span><span class="se28">extract_white_space</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">FF</span><span class="se2">(</span><span class="se19">1</span><span class="se2">)))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ws</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span><span class="se2"> </span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_xml_token_in_sequence</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">mut</span><span class="se2"> </span><span class="se55">xmltoken</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\u{0020}\u{0009}\u{000A}\u{000D}\u{000C}&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">.</span><span class="se28">extract_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Space</span><span class="se2">(</span><span class="se19">1</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">, </span><span class="se20">&quot;\u{0009}\u{000A}\u{000D}\u{000C}&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">.</span><span class="se28">extract_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">Tab</span><span class="se2">(</span><span class="se19">1</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">, </span><span class="se20">&quot;\u{000A}\u{000D}\u{000C}&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">.</span><span class="se28">extract_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">LF</span><span class="se2">(</span><span class="se19">1</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">, </span><span class="se20">&quot;\u{000D}\u{000C}&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">.</span><span class="se28">extract_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">CR</span><span class="se2">(</span><span class="se19">1</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">, </span><span class="se20">&quot;\u{000C}&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">.</span><span class="se28">extract_xml_token</span><span class="se2">(), </span><span class="se28">Some</span><span class="se2">(</span><span class="se55">XmlToken</span><span class="se25">::</span><span class="se28">Whitespace</span><span class="se2">(</span><span class="se55">WhitespaceKind</span><span class="se25">::</span><span class="se28">FF</span><span class="se2">(</span><span class="se19">1</span><span class="se2">))))</span><span class="se25">;</span>
<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">xmltoken</span><span class="se2">, </span><span class="se20">&quot;&quot;</span><span class="se2">)</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span><span class="se2"> </span>

<span class="se2">        #[</span><span class="se55">test</span><span class="se2">]</span>
<span class="se2">        </span><span class="se55">fn</span><span class="se2"> </span><span class="se28">extract_ident</span><span class="se2">() </span><span class="se23">{</span>
<span class="se2">                </span><span class="se55">let</span><span class="se2"> </span><span class="se55">ident</span><span class="se25">:</span><span class="se2"> </span><span class="se55">String</span><span class="se2"> </span><span class="se25">=</span><span class="se2"> </span><span class="se20">&quot;\&quot;ident\&quot;&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()</span><span class="se25">;</span>

<span class="se2">                </span><span class="se55">assert_eq</span><span class="se25">!</span><span class="se2">(</span><span class="se55">ident</span><span class="se2">.</span><span class="se28">check_ident</span><span class="se2">(</span><span class="se25">&amp;</span><span class="se58">'\&quot;'</span><span class="se2">, </span><span class="se25">&amp;</span><span class="se58">'\&quot;'</span><span class="se2">), </span><span class="se28">Some</span><span class="se2">(</span><span class="se20">&quot;ident&quot;</span><span class="se2">.</span><span class="se28">to_string</span><span class="se2">()))</span><span class="se25">;</span>
<span class="se2">        </span><span class="se23">}</span><span class="se2"> </span>
<span class="se23">}</span>
</pre>
</body>
</html>
